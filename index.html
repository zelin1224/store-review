
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>店長考核表</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .section { margin-bottom: 30px; border: 1px solid #ccc; padding: 15px; border-radius: 8px; }
        .title { font-weight: bold; font-size: 18px; margin-bottom: 10px; }
        .check-item { cursor: pointer; margin: 5px 0; }
        .stars { font-size: 20px; margin: 10px 0; }
        textarea { width: 100%; height: 60px; margin-top: 10px; }
        button { padding: 10px 20px; font-size: 16px; }
    </style>
</head>
<body>
    <h1>匿名店長考核表</h1>
    <form id="assessmentForm"></form>
    <!-- F 建議區塊 -->
    <div class="section">
      <div class="title">F 對店裡任何的想法建議，如何做會更有趣好玩！</div>
      <label for="fSuggestion">建議：</label>
      <textarea id="fSuggestion" placeholder="請輸入您的建議或想法..."></textarea>
    </div>
    <button onclick="submitForm()">送出評分表</button>

    <script>
        const sections = {
            A: {
                title: "A 團隊溝通（Communication）",
                items: [
                    "店長能清楚傳達營運指令",
                    "能有效的雙向溝通",
                    "確保同仁們都能「聽得懂、聽得進」"
                ]
            },
            B: {
                title: "B 相處氛圍（Team Chemistry）",
                items: [
                    "日常工作氣氛是否愉快",
                    "員工彼此互動給予良性支持",
                    "店內問題處理客觀中立無明顯對立或邊緣現象",
                    "協助新進人員快速融入團隊生活"
                ]
            },
            C: {
                title: "C 團隊向心力與凝聚力（Cohesion）",
                items: [
                    "店長是否能讓團隊對目標有共同認知",
                    "團隊是否能朝共同目標努力",
                    "有無適度調配人員主動支援他人"
                ]
            },
            D: {
                title: "D 員工成長與被重視感（Empowerment & Value）",
                items: [
                    "給予員工學習新技能機會",
                    "店長對於下達指令能以身作則",
                    "同仁遇到問題能給予同理心協助",
                    "協助安排同仁輪崗學習制度"
                ]
            },
            E: {
                title: "E 壓力與情緒管理（Emotional Climate）",
                items: [
                    "店長能在高壓或突發情境下穩定情緒",
                    "能提出解決方案，而非純屬問題轉述"
                ]
            }
        };

        const form = document.getElementById("assessmentForm");

        for (const key in sections) {
            const section = document.createElement("div");
            section.className = "section";
            section.innerHTML = `<div class="title">${sections[key].title}</div>`;

            sections[key].items.forEach((text, i) => {
                const check = document.createElement("div");
                check.className = "check-item";
                check.innerHTML = `<span data-status="0" onclick="toggleStatus(this)">⬜</span> ${text}`;
                section.appendChild(check);
            });

            section.innerHTML += `
                <div>
                    評分（1-4 星）：<input type="range" min="1" max="4" value="1" onchange="updateStars(this)">
                    <span class="stars">1 ⭐</span>
                </div>
                <textarea placeholder="備註..."></textarea>
            `;
            form.appendChild(section);
        }

        function toggleStatus(el) {
            let status = parseInt(el.getAttribute("data-status"));
            status = (status + 1) % 3;
            el.setAttribute("data-status", status);
            el.textContent = status === 0 ? "⬜" : status === 1 ? "✅" : "❌";
        }

        function updateStars(el) {
            el.nextElementSibling.textContent = `${el.value} ⭐`;
        }

        function submitForm() {
            const results = [];
            const sections = document.querySelectorAll(".section");
            sections.forEach((section, index) => {
                const title = section.querySelector(".title").textContent;
                const checks = Array.from(section.querySelectorAll("span[data-status]")).map(el => el.getAttribute("data-status"));
                const stars = section.querySelector("input[type='range']")?.value || null;
                const remark = section.querySelector("textarea")?.value || "";
                results.push({ title, checks, stars, remark });
            });

            // F 建議內容
            const suggestion = document.getElementById("fSuggestion").value;
            results.push({
                title: "F 建議",
                suggestion: suggestion
            });

            const blob = new Blob([JSON.stringify(results, null, 2)], { type: "application/json" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "assessment_result.json";
            a.click();
        }
    </script>
</body>
</html>
